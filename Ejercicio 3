import tkinter as tk
from tkinter import messagebox
import math
from dataclasses import dataclass


@dataclass
class CalculosNumericos:
    """Clase con operaciones matemáticas y manejo de excepciones."""

    @staticmethod
    def logaritmo(valor: float) -> float:
        """Calcula el logaritmo natural de un número positivo."""
        if valor <= 0:
            raise ArithmeticError("Error: El logaritmo solo está definido para valores positivos.")
        return math.log(valor)

    @staticmethod
    def raiz_cuadrada(valor: float) -> float:
        """Calcula la raíz cuadrada de un número positivo."""
        if valor < 0:
            raise ArithmeticError("Error: No se puede calcular la raíz cuadrada de un número negativo.")
        return math.sqrt(valor)


# --- Interfaz gráfica con tkinter ---
class VentanaCalculos:
    def __init__(self, root):
        self.root = root
        self.root.title("Cálculos Numéricos")
        self.root.geometry("420x320")
        self.root.configure(bg="#eef2f3")

        # Etiquetas y campos de texto
        tk.Label(root, text="Ingrese un número:", bg="#eef2f3", font=("Arial", 12)).pack(pady=10)
        self.valor_entry = tk.Entry(root, font=("Arial", 12))
        self.valor_entry.pack(pady=5)

        # Botones de acción
        tk.Button(root, text="Calcular Logaritmo", command=self.calcular_logaritmo, bg="#4CAF50", fg="white", width=25).pack(pady=10)
        tk.Button(root, text="Calcular Raíz Cuadrada", command=self.calcular_raiz, bg="#2196F3", fg="white", width=25).pack(pady=10)

        tk.Button(root, text="Salir", command=root.destroy, bg="#f44336", fg="white", width=25).pack(pady=20)

    def calcular_logaritmo(self):
        """Maneja la lógica de cálculo de logaritmo"""
        try:
            valor = float(self.valor_entry.get())
            resultado = CalculosNumericos.logaritmo(valor)
            messagebox.showinfo("Resultado", f"Logaritmo natural de {valor} = {resultado:.4f}")
        except ValueError:
            messagebox.showerror("Error de tipo", "Debe ingresar un número válido.")
        except ArithmeticError as e:
            messagebox.showerror("Error matemático", str(e))
        except Exception as e:
            messagebox.showerror("Error inesperado", str(e))
        finally:
            print("Finalizó la ejecución del bloque logaritmo")

    def calcular_raiz(self):
        """Maneja la lógica de cálculo de raíz cuadrada"""
        try:
            valor = float(self.valor_entry.get())
            resultado = CalculosNumericos.raiz_cuadrada(valor)
            messagebox.showinfo("Resultado", f"Raíz cuadrada de {valor} = {resultado:.4f}")
        except ValueError:
            messagebox.showerror("Error de tipo", "Debe ingresar un número válido.")
        except ArithmeticError as e:
            messagebox.showerror("Error matemático", str(e))
        except Exception as e:
            messagebox.showerror("Error inesperado", str(e))
        finally:
            print("Finalizó la ejecución del bloque raíz cuadrada")



if __name__ == "__main__":
    root = tk.Tk()
    app = VentanaCalculos(root)
    root.mainloop()
